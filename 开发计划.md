# 圣诞祝福H5小程序开发计划

## 📋 项目概述

开发一个单页面H5应用，发送人创建专属祝福链接（选择关系+可选自定义祝福语），接收人点击链接看到对应关系的圣诞场景动画和祝福内容。

---

## 🏗️ 技术架构

### 技术栈
- **前端框架**: 纯HTML5 + CSS3 + Vanilla JavaScript（无需构建工具，快速开发）
- **动画引擎**: Canvas API（粒子系统） + CSS3 Animation
- **数据传输**: URL参数 + Base64编码
- **部署方式**: 静态托管（GitHub Pages / Vercel / Netlify）

### 核心文件结构
```
christmas-blessing/
├── index.html              # 主页面（创建+展示统一入口）
├── css/
│   ├── common.css         # 通用样式
│   ├── create.css         # 创建页样式
│   └── scenes/            # 7种关系场景样式
│       ├── lover.css
│       ├── friend.css
│       └── ...
├── js/
│   ├── main.js            # 主逻辑（路由判断）
│   ├── create.js          # 创建页逻辑
│   ├── display.js         # 展示页逻辑
│   ├── snow.js            # Canvas雪花系统
│   └── blessings.js       # 预设祝福语库
└── assets/
    ├── images/            # 场景图片素材
    ├── audio/             # 圣诞音乐
    └── fonts/             # 特殊字体
```

---

## 🎯 核心功能模块

### 1. 创建页面（Create Page）
**功能点:**
- 输入发送人姓名
- 选择7种关系之一（单选卡片形式）
- 可选填自定义祝福语（折叠面板，默认收起）
- 生成专属链接并展示（可复制/直接分享到微信）

**技术要点:**
- URL参数编码：`?sender=名字&relation=关系&msg=自定义内容`
- Base64编码防止中文乱码
- 生成二维码方便扫码分享（使用qrcode.js库）

### 2. 展示页面（Display Page）
**功能点:**
- 解析URL参数
- 根据关系类型加载对应场景
- 展示动画效果 + 祝福语
- 背景音乐控制（可开关）
- 保存图片功能（html2canvas）

**技术要点:**
- 路由判断：有参数→展示页，无参数→创建页
- 动态加载CSS（根据关系类型）
- Canvas粒子系统（雪花、烟花、玫瑰花瓣等）

### 3. 7种关系场景设计

| 关系 | 主色调 | 核心动画 | 装饰元素 |
|------|--------|----------|----------|
| 💑 恋人 | 粉红+白 | 爱心烟花、玫瑰飘落 | 浪漫飘雪、月亮 |
| 👫 朋友 | 橙黄+绿 | 礼物盒弹跳、彩灯闪烁 | 雪人、星星 |
| 👨‍👩‍👧 家人 | 暖橙+红 | 壁炉火焰、相框浮现 | 圣诞树、袜子 |
| 🤝 同事 | 蓝+金 | 金色粒子上升、雪花 | 商务圣诞树 |
| 🏡 邻居 | 绿+暖黄 | 房屋灯光闪烁、飘雪 | 街道、灯笼 |
| 🎓 师生 | 深蓝+白 | 书页翻动、智慧光芒 | 黑板、粉笔字 |
| 💼 上下级 | 深灰+金 | 奖杯闪耀、飘雪 | 徽章、礼盒 |

### 4. 祝福语系统
**预设祝福语库（blessings.js）:**
```javascript
const blessings = {
  lover: [
    "在这个温馨的圣诞夜，想和你一起看雪花飘落，许下关于未来的每一个心愿...",
    "圣诞老人说，今年最好的礼物是你...",
    // 每种关系3-5条备选
  ],
  friend: [...],
  family: [...],
  // ...
}
```

**展示逻辑:**
```
【发送人自定义祝福语】（如果有）
      ↓
【系统随机预设祝福语】（根据关系）
```

---

## 🎨 关键动画实现

### Canvas雪花系统（snow.js）
```javascript
class SnowSystem {
  constructor(canvas, count, style) {
    // count: 雪花数量（恋人150，其他100）
    // style: 雪花样式（圆形/爱心/星形）
  }
  // 物理引擎：重力、风力、摇摆
}
```

### CSS关键帧动画
- **文字浮现**: 逐字打字机效果（0.05s延迟）
- **卡片翻转**: 3D transform rotateY
- **元素入场**: 淡入+上移（stagger animation）
- **背景渐变**: linear-gradient动态变化

---

## 🚀 开发步骤

### Phase 1: 基础框架（2-3小时）
- 创建项目结构
- 编写主HTML骨架
- 实现路由逻辑（创建页/展示页切换）
- 通用样式（响应式布局、字体、颜色变量）

### Phase 2: 创建页面（2小时）
- 姓名输入框 + 验证
- 7个关系选择卡片（hover效果）
- 自定义祝福语输入（可折叠）
- 生成链接逻辑 + 复制功能
- 集成二维码生成（qrcode.min.js CDN）

### Phase 3: 展示页面基础（3小时）
- URL参数解析（Base64解码）
- 展示页面布局（全屏居中）
- 祝福语打字机动画
- 背景音乐控制器
- 保存图片功能（html2canvas）

### Phase 4: Canvas动画系统（3-4小时）
- 实现雪花粒子系统（可复用）
- 恋人场景：爱心烟花 + 玫瑰花瓣
- 朋友场景：礼物盒动画
- 其他场景的特定动画效果
- 性能优化（requestAnimationFrame）

### Phase 5: 7种场景样式（4-5小时）
- 每种关系的CSS独立文件
- 场景背景图/渐变色
- 特定装饰元素定位
- 预设祝福语编写（每种3-5条）

### Phase 6: 细节打磨（2-3小时）
- 移动端适配测试
- 微信浏览器兼容性调整
- 加载动画/过渡效果
- 错误处理（URL参数异常）
- 分享优化（设置meta标签）

### Phase 7: 部署上线（1小时）
- 代码压缩优化
- 部署到静态托管平台
- 生成短链接（可选）
- 测试微信分享效果

---

## 📦 外部依赖（CDN引入）

```html
<!-- 二维码生成 -->
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

<!-- 截图保存 -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<!-- 圣诞音乐（可选） -->
<audio src="https://cdn.example.com/jingle-bells.mp3"></audio>
```

---

## 🎯 关键技术难点解决

### 1. URL参数过长问题
```javascript
// 使用LZ压缩算法（可选）
const compressed = LZString.compressToEncodedURIComponent(longString);
```

### 2. 微信分享优化
```html
<meta property="og:title" content="圣诞祝福来啦！" />
<meta property="og:image" content="分享缩略图URL" />
```

### 3. Canvas性能优化
- 离屏Canvas预渲染
- 粒子数量动态调整（根据设备性能）
- 使用`will-change`提示GPU加速

---

## 📱 兼容性保证

- **浏览器**: Chrome 60+, Safari 12+, 微信浏览器
- **移动端**: iOS 12+, Android 6+
- **响应式**: 320px - 1920px屏幕适配
- **性能目标**: 60fps流畅动画，加载时间<3秒

---

## 🎄 可选增强功能

1. **查看记录**: LocalStorage保存创建历史
2. **多语言**: 中英文切换
3. **主题切换**: 经典红绿/冰雪蓝白
4. **统计功能**: 记录链接访问次数
5. **AI生成**: 接入GPT API动态生成祝福语

---

## ⏱️ 预计总开发时间

**核心功能**: 1.5 - 2天（12-16小时）
**完整打磨**: 2 - 3天（16-24小时）

快速上线版本可在**1天内**完成基础功能 + 3种主要场景（恋人/朋友/家人）。

---

## ✅ 开发任务清单

- [ ] **Phase 1**: 创建项目结构和基础文件
- [ ] **Phase 2**: 开发创建页面（输入+选择+生成链接）
- [ ] **Phase 3**: 实现展示页面基础逻辑和布局
- [ ] **Phase 4**: 开发Canvas粒子动画系统
- [ ] **Phase 5**: 设计并实现7种关系场景样式
- [ ] **Phase 6**: 编写预设祝福语库
- [ ] **Phase 7**: 移动端适配和细节打磨
- [ ] **Phase 8**: 部署上线并测试分享功能

---

🎅 **祝开发顺利！圣诞快乐！** 🎄

